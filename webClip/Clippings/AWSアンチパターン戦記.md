---
title: AWSアンチパターン戦記
source: https://speakerdeck.com/armaniacs/awsantipatanzhan-ji
author:
  - "[[Speaker Deck]]"
published: 
created: 2025-05-06
description: 「君子危うきに近寄らず」という言葉は、賢明な人は危険を避けるという意味を持ちます。アンチパターンを知り、それを回避するのは第一歩準備を怠ると動いてるシステムがアンチパターンとなる。準備とは、データを集め、テストを繰り返すことから。新しいことへの果敢なチャレンジをわすれずに。ときには、AW…
tags:
  - クラウド
  - 1
  - バックエンド
  - バックエンド設計
  - 思想系
read: false
---
## More Decks by ARAKI Yasuhiro

[

CSPが提供しない、フレッツ網をつかった閉域接続サービス＆データ持ち込みにつかえるサービス 3選

](https://speakerdeck.com/armaniacs/cspgati-gong-sinai-huretutuwang-wotukatutabi-yu-jie-sok-sabisu-and-detachi-tiip-minitukaerusabisu-3xuan "CSPが提供しない、フレッツ網をつかった閉域接続サービス＆データ持ち込みにつかえるサービス 3選")

[armaniacs](https://speakerdeck.com/armaniacs)

1

2.3k

[

AWS Security and Risk Management Forum【Closing】公共セッション

](https://speakerdeck.com/armaniacs/aws-security-and-risk-management-forum-closing-gong-gong-setusiyon "AWS Security and Risk Management Forum【Closing】公共セッション")

[armaniacs](https://speakerdeck.com/armaniacs)

0

130

[

AWSのこの10年よもやま

](https://speakerdeck.com/armaniacs/awsnokono10nian-yomoyama "AWSのこの10年よもやま")

[armaniacs](https://speakerdeck.com/armaniacs)

0

630

[

AWSで2022に打破されたアンチパターン(2022.09まで)

](https://speakerdeck.com/armaniacs/awsde2022nida-po-saretaantipatan-2022-dot-09made "AWSで2022に打破されたアンチパターン(2022.09まで)")

[armaniacs](https://speakerdeck.com/armaniacs)

2

1k

[

「線をひっこぬけ！」といわれたら

](https://speakerdeck.com/armaniacs/xian-wohitukonuke-toiwaretara "「線をひっこぬけ！」といわれたら")

[armaniacs](https://speakerdeck.com/armaniacs)

2

720

[

AWS大阪リージョンオープン記念：みんなで大阪リージョンを語る

](https://speakerdeck.com/armaniacs/awsda-ban-riziyonopunji-nian-minnadeda-ban-riziyonwoyu-ru "AWS大阪リージョンオープン記念：みんなで大阪リージョンを語る")

[armaniacs](https://speakerdeck.com/armaniacs)

1

2.9k

## Other Decks in Technology

[

C++26アップデート 2025-03

](https://speakerdeck.com/faithandbrave/c-plus-plus-26atupudeto-2025-03 "C++26アップデート 2025-03")

[faithandbrave](https://speakerdeck.com/faithandbrave)

0

1.1k

[

Mastraに入門してみた ~AWS CDKを添えて~

](https://speakerdeck.com/tsukuboshi/mastraniru-men-sitemita-aws-cdkwotian-ete "Mastraに入門してみた ~AWS CDKを添えて~")

[tsukuboshi](https://speakerdeck.com/tsukuboshi)

0

360

[

ここはMCPの夜明けまえ

](https://speakerdeck.com/nwiizo/kokohamcpnoye-ming-kemae "ここはMCPの夜明けまえ")

[nwiizo](https://speakerdeck.com/nwiizo)

32

12k

[

Databricksで完全履修！オールインワンレイクハウスは実在した！

](https://speakerdeck.com/akuwano/databricksdewan-quan-lu-xiu-oruinwanreikuhausuhashi-zai-sita "Databricksで完全履修！オールインワンレイクハウスは実在した！")

[akuwano](https://speakerdeck.com/akuwano)

0

130

[

Стильный код: натуральный поиск редких атрибутов по картинке. Юлия Антохина, Data Scientist, Lamoda Tech

](https://speakerdeck.com/lamodatech/stilnyi-kod-naturalnyi-poisk-riedkikh-atributov-po-kartinkie-iuliia-antokhina-data-scientist-lamoda-tech "Стильный код: натуральный поиск редких атрибутов по картинке. Юлия Антохина, Data Scientist, Lamoda Tech")

[lamodatech](https://speakerdeck.com/lamodatech)

0

850

[

PagerDuty×ポストモーテムで築く障害対応文化/Building a culture of incident response with PagerDuty and postmortems

](https://speakerdeck.com/aeonpeople/building-a-culture-of-incident-response-with-pagerduty-and-postmortems "PagerDuty×ポストモーテムで築く障害対応文化/Building a culture of incident response with PagerDuty and postmortems")

[aeonpeople](https://speakerdeck.com/aeonpeople)

3

490

[

10ヶ月かけてstyled-components v4からv5にアップデートした話

](https://speakerdeck.com/uhyo/10keyue-kaketestyled-components-v4karav5niatupudetositahua "10ヶ月かけてstyled-components v4からv5にアップデートした話")

[uhyo](https://speakerdeck.com/uhyo)

5

430

[

ビジネスとデザインとエンジニアリングを繋ぐために 一人のエンジニアは何ができるか / What can a single engineer do to connect business, design, and engineering?

](https://speakerdeck.com/kaminashi/what-can-a-single-engineer-do-to-connect-business-design-and-engineering "ビジネスとデザインとエンジニアリングを繋ぐために 一人のエンジニアは何ができるか / What can a single engineer do to connect business, design, and engineering?")

[kaminashi](https://speakerdeck.com/kaminashi)

2

820

[

Goの組織でバックエンドTypeScriptを採用してどうだったか / How was adopting backend TypeScript in a Golang company

](https://speakerdeck.com/kaminashi/how-was-adopting-backend-typescript-in-a-golang-company "Goの組織でバックエンドTypeScriptを採用してどうだったか / How was adopting backend TypeScript in a Golang company")

[kaminashi](https://speakerdeck.com/kaminashi)

12

9k

[

Conquering PDFs: document understanding beyond plain text

](https://speakerdeck.com/inesmontani/conquering-pdfs-document-understanding-beyond-plain-text "Conquering PDFs: document understanding beyond plain text")

[inesmontani](https://speakerdeck.com/inesmontani)

[PRO](https://speakerdeck.com/pro)

2

400

[

Azure Maps Visual in PowerBIで分析しよう

](https://speakerdeck.com/nakasho/azure-maps-visual-in-powerbitefen-xi-siyou "Azure Maps Visual in PowerBIで分析しよう")

[nakasho](https://speakerdeck.com/nakasho)

0

160

[

3D生成AIのための画像生成

](https://speakerdeck.com/kosukeito/3dsheng-cheng-ainotamenohua-xiang-sheng-cheng "3D生成AIのための画像生成")

[kosukeito](https://speakerdeck.com/kosukeito)

2

560

## Featured

[

How STYLIGHT went responsive

](https://speakerdeck.com/nonsquared/how-stylight-went-responsive "How STYLIGHT went responsive")

[nonsquared](https://speakerdeck.com/nonsquared)

100

5.5k

[

BBQ

](https://speakerdeck.com/matthewcrist/bbq "BBQ")

[matthewcrist](https://speakerdeck.com/matthewcrist)

88

9.6k

[

YesSQL, Process and Tooling at Scale

](https://speakerdeck.com/rocio/yessql-process-and-tooling-at-scale "YesSQL, Process and Tooling at Scale")

[rocio](https://speakerdeck.com/rocio)

172

14k

[

Producing Creativity

](https://speakerdeck.com/orderedlist/producing-creativity "Producing Creativity")

[orderedlist](https://speakerdeck.com/orderedlist)

[PRO](https://speakerdeck.com/pro)

344

40k

[

Documentation Writing (for coders)

](https://speakerdeck.com/carmenintech/documentation-writing-for-coders "Documentation Writing (for coders)")

[carmenintech](https://speakerdeck.com/carmenintech)

69

4.7k

[

The Illustrated Children's Guide to Kubernetes

](https://speakerdeck.com/chrisshort/the-illustrated-childrens-guide-to-kubernetes "The Illustrated Children's Guide to Kubernetes")

[chrisshort](https://speakerdeck.com/chrisshort)

48

49k

[

Speed Design

](https://speakerdeck.com/sergeychernyshev/speed-design "Speed Design")

[sergeychernyshev](https://speakerdeck.com/sergeychernyshev)

29

920

[

KATA

](https://speakerdeck.com/mclloyd/kata "KATA")

[mclloyd](https://speakerdeck.com/mclloyd)

29

14k

[

Adopting Sorbet at Scale

](https://speakerdeck.com/ufuk/adopting-sorbet-at-scale "Adopting Sorbet at Scale")

[ufuk](https://speakerdeck.com/ufuk)

76

9.3k

[

What's in a price? How to price your products and services

](https://speakerdeck.com/michaelherold/whats-in-a-price-how-to-price-your-products-and-services "What's in a price? How to price your products and services")

[michaelherold](https://speakerdeck.com/michaelherold)

245

12k

[

Reflections from 52 weeks, 52 projects

](https://speakerdeck.com/jeffersonlam/reflections-from-52-weeks-52-projects "Reflections from 52 weeks, 52 projects")

[jeffersonlam](https://speakerdeck.com/jeffersonlam)

349

20k

[

Exploring the Power of Turbo Streams & Action Cable | RailsConf2023

](https://speakerdeck.com/kevinliebholz/exploring-the-power-of-turbo-streams-and-action-cable "Exploring the Power of Turbo Streams & Action Cable | RailsConf2023")

[kevinliebholz](https://speakerdeck.com/kevinliebholz)

32

5.4k

## Transcript

1. ### AWSアンチパターン 戦記 2024.7 アマゾンウェブサービスジャパン 荒⽊靖宏
2. ### Xへの投稿の際は、 ハッシュタグ #1\_odyssey でお願いいたします。 2 お願い
3. ### $ whoami 荒⽊はAWSのSAです AWSをつかいはじめて17年 ソリューションアーキテクト（SA）13年 AWSアンチパターン研究 12年
4. ### 本題のまえに
5. ### AWS サポート ⽬的を達成するための専⾨的なガイダンスとアシスタンスを⼊⼿
6. ### https://aws.amazon.com/jp/premiumsupport/tech-support-guidelines/
7. ### アンチパターンに準備をして挑むべし プラクティスをアウトプットするべし
8. ### AWSアンチパターン
9. ### AWSアンチパターンのこれまで 発表日 タイトル（一部抜粋） 2022年10月 AWSで2022に打破されたアンチパターン(2022.09まで) 2022年1月 JAWS-UG 2022初頭までに葬ったAWSアンチパターン大紹介 2018年5月 失敗例を成功に変えるAWSアンチパターン
	2015年6月 失敗例を成功に変える AWSアンチパターンのご紹介 2012年10月 \[AWS Summit 2012\] クラウドデザインパターン#8 CDP アンチ パターン編
10. ### AWSアンチパターンのこれまで 2012年10月 \[AWS Summit 2012\] クラウドデザインパターン#8 CDP アンチ パターン編 AWSクラウドデザインパターンとは...
	AWSクラウドを使ったシステムアーキテクチャ設計を⾏う 際に発⽣する、典型的な問題とそれに対する解決策‧設計 ⽅法を、分かりやすく分類して、ノウハウとして利⽤でき るように整理したもの
11. ### アンチパターン 動作やプロセス、構造につい て、当初は妥当であったの に、最終的に悪い結果が繰り 返される リファクタリングするための ⽅法が存在する
12. ### システムを取り巻く環境 利⽤者とその環境 あなたの作ったサービス AWSのサービス群
13. ### システム構築時 利⽤者とその環境 あなたの作るサービス AWSのサービス群 XXXみたいなサー ビス作りたいので ベストプラクティ スを教えて！ XXXなら、 1.6TBのHDD
	がある c1.xlargeで XXXさん、 DynamoDB活 ⽤されてます XXXさん、 VPNだと帯域 たりないので 専⽤線つかっ てます とあるSA
14. ### 動作するシステム 妥当なシステム アンチパターン 環境の変化 リファクタリング システム構築は「妥当点」でリリースされ それははじまりにすぎない
15. ### アンチパターンとベストプラクティス 合理的なシステム アンチパターン 環境の変化 リファクタリング ベストプラクティス （1社では） 尋常ならざる努⼒
16. ### 環境の変化？ 利⽤者とその環境 あなたの作ったサービス AWSのサービス群 変動要因 AWS⾃体の更新と拡張 使いこなし術の進化 ビジネス要件、規制、 技術トレンド
17. ### 環境変化には⾃ら対応するべき 利⽤者とその環境 あなたの作ったサービス AWSのサービス群 変動要因 AWS⾃体の更新と拡張 使いこなし術の進化 ビジネス要件、規制、 技術トレンド ⾃⼒をつけ
	る取り組み
18. ### ⾃信をもった リファクタリングのために
19. ### 外形監視サービス リファクタリング時は外部から⾒た時の挙動は変えない Synthetics RUM Evidently AWS X-Ray アプリケーション動作 の監視やカナリアテ ストの実行に
	エンドユーザの実際 の体験をモニタリング A/Bテストやカナリ アデプロイに使用 分散システムの 問題箇所特定に
20. ### モニタリングとログ収集 システムの可視性を⾼めて健全性を維持 インシデントへの迅速な対応を可能に Amazon CloudWatch AWS CloudTrail Amazon EventBridge AWS
	X-Ray AWS Distro for OpenTelemetry Amazon Managed Service for Prometheus
21. ### 収集したデータの活⽤ 収集したログデータは、統合→加⼯→分析→可 視化して使⽤する Amazon Athena Amazon QuickSight AWS Lambda Amazon
	Kinesis AWS Glue Amazon SageMaker
22. ### インフラをコード化して再現性確保 変更管理の容易化、変更履歴の追跡が容易 AWS CloudFormation AWS Cloud Development Kit (AWS CDK)
23. ### リファクタリングのための番外編 AWSに頼らない⾃⾛⼒の確保 OSSやSaaSの利⽤検討 社内知識活⽤のための投資
24. ### DevelopersIOでふりかえる AWSアンチパターンを ⽣みそうな発表選 24 多すぎるので新し ⽬のセキュリティ 関連に絞りました
25. ### Cloudshell VPC environment ←平⽊佳介さんの今⽉の記事 “今回新規で追加された CloudShell VPC environment によって踏み台 サーバの運⽤に⼤きな変化が起きる
	と思います。 しかし⼿軽にできるのが逆にネック になってしまったり監査証跡が取れ ないなど踏み台サーバとして 100% 代替するのは難しそうですが最⾼の アップデートだと思いました。” https://dev.classmethod.jp/articles/jawsmt-2024-cloudshell-vpc/
26. ### Amazon GuardDutyのEC2ランタイム保護 にUbuntuとDebianが追加 ← 臼田佳祐さんの 2024-06-20 の記事 “GuardDutyのEC2 Runtime MonitoringでサポートするOSが
	増えました。やったね。” “新しくUbuntuとDebianがサ ポートされたので試してみま す。” https://dev.classmethod.jp/articles/guardduty-ec2-runtime-support-ubuntu-and-debian/
27. ### Amazon GuardDuty Malware Protection for Amazon S3 (2024 re:Inforceで発表) ←
	臼田佳祐さんの 2024-06-11 の記事 “ちなみに、従来S3に対する サーバレスなマルウェアスキャ ンを実行しようとしたら、Trend MicroのCloud One File Strage Security(C1FSS)が代表的な選 択肢でした。” https://dev.classmethod.jp/articles/release-guardduty-s3-malware-protection/
28. ### CloudTrail LakeでCloudTrail Insights のイベントが分析できるように ←芦沢 広昭さんの2024.03の記事 “セキュリティガバナンスに関する費 ⽤にあまりコストをかけたくない、む しろゼロに抑えたいという要望も出て くるはずです。これまでの証跡による
	Insights運⽤ではこれが実現できませ んでした。” https://dev.classmethod.jp/articles/cloudtrail-lake-supported-cloudtrail-insights/
29. ### Amazon Detectiveの調査機能で、IAMリ ソースの調査が可能に ←鈴⽊純さんの2023.11の記事 “Detective の調査機能で、IAM リソー スについての調査を試してみました。 攻撃者が利⽤した IAM
	リソースを特定 できた時の影響範囲の特定などに活⽤ できそうです。 いざという時のために、この機能が利 ⽤できることを覚えておきたいです ね。” https://dev.classmethod.jp/articles/update-amazon-detective-investigation-feature-iam-resource/
30. ### Amazon S3の新規バケットのブロックパブ リックアクセスが有効化およびACLが無効化 ←みなみ さんの2023.04の記事 “今回のアップデートでは、APIでバケット作 成する場合に、デフォルトでブロックパブ リックアクセスが有効化、ACLが無効化され るというものです。 実施に、CloudFormationなどIaCでS3バ
	ケットを構築した際に、ブロックパブリック アクセスの有効化、ACLの無効化を忘れた⽅ もいるんじゃないでしょうか？ それではスクリプトで利⽤可能な全リージョ ンでS3バケットを作成してみます。” https://dev.classmethod.jp/articles/udpate-default-change-amazon-s3-bpa-acl/
31. ### AWS IAM Access Analyzer ←千葉 幸宏（チバユキ）さんの2022.11の記事 2019.12GAのサービスだが “2022年10⽉には他にも IAM Acceess
	Analyzer 関連のアップデートがあり ます。最近頑張ってるなという印象を 感じます。” “どんどん強くなっていく IAM Access Analyser を活⽤して環境のセキュリ ティレベルを上げていきましょい。” https://dev.classmethod.jp/articles/iam-access-analyzer-findings-amazon-sns-topics-5-aws-resource-types-account-access/
32. ### CloudFrontからS3への新たなアクセス制御⽅法とし てOrigin Access Control (OAC)が発表されました！ ←清⽔俊也さんの2022.08の記事 “CloudFrontからS3へのアクセス制限を⾏う場 合には必須機能であるOAIですが、S3バケット 側でAWS Key
	Management Service (AWS KMS)を使った暗号化、SSE-KMSを使⽤した場 合に使⽤できない（対応していない）という制 限がありました。” “セキュリティ⾯の強化もありますので、新た にCloudFrontからS3へのアクセス制限を⾏う 場合にはOAC (origin Access Control)を使⽤し ていきましょう。” https://dev.classmethod.jp/articles/amazon-cloudfront-origin-access-control/
33. ### まとめ
34. ### アンチパターンに準備をして挑むべし プラクティスをアウトプットするべし
35. ### アンチパターンとベストプラクティス 合理的なシステム アンチパターン 環境の変化 リファクタリング ベストプラクティス （1社では） 尋常ならざる努⼒ みんなでOutputすればより よいものになる
	データを集め、テストを繰 り返せるように準備をすれ ば確実性が増す
36. ### Thanks!
37. [None](https://files.speakerdeck.com/presentations/7bef7e81e169413a83ed2f9f7b08099a/slide_36.jpg)
38. [None](https://files.speakerdeck.com/presentations/7bef7e81e169413a83ed2f9f7b08099a/slide_37.jpg)
39. [None](https://files.speakerdeck.com/presentations/7bef7e81e169413a83ed2f9f7b08099a/slide_38.jpg)